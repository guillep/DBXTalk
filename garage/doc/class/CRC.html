<html><head><title>CRC</title><link rel="stylesheet" type="text/css" href="../files/common.css"/><link rel="stylesheet" type="text/css" href="../files/stcode.css"/><link rel="stylesheet" type="text/css" href="../files/style.css"/><link rel="stylesheet" type="text/css" href="../files/vtip.css"/><script>/*<![CDATA[*/
document.WEBDOC_RELATIVE_DOCUMENT_ROOT ="../..";
document.WEBDOC_PHARO_VERSION ="'4.0'";
/*]]>*/</script><script src="../files/jQuery.js"></script><script src="../files/jQueryUi.js"></script><script src="../files/app.js"></script></head><body onload="onLoad()"><div id="header"><form accept-charset="utf-8" method="get" action="/" class="hidden" id="search"><div class="searchInput">Search: <input accesskey="s" placeholder="search" name="4" id="search_box" size="30" value="" onkeyup="$.ajax({&quot;url&quot;:&quot;/&quot;,&quot;data&quot;:[&quot;1&quot;,&quot;2=&quot;+encodeURIComponent($(&quot;#search_box&quot;).val())].join(&quot;&amp;&quot;)});$(&quot;#searchResults&quot;).load(&quot;/&quot;,&quot;3&quot;)" type="search" class="search"/></div><div id="searchResults"></div><div></div></form></div><div id="content"><h1 class="className">CRC</h1><dl class="box"><dt>Subclass of: </dt><dd><span class="inheritName"><a class="object_link class_link" target="classView" title="Checksum (class)" href="../class/Checksum.html">Checksum</a></span><ul class="fullTree"><li><a class="object_link class_link" target="classView" title="CRC (class)" href="../class/CRC.html">CRC</a></li><li class="next"><a class="object_link class_link" target="classView" title="ProtoObject (class)" href="../class/ProtoObject.html">ProtoObject</a></li><li class="next"><a class="object_link class_link" target="classView" title="Object (class)" href="../class/Object.html">Object</a></li><li class="next"><a class="object_link class_link" target="classView" title="Checksum (class)" href="../class/Checksum.html">Checksum</a></li></ul><a class="inheritanceTree">&oplus;</a></dd></dl><br/><div class="classComment"><h2 class="title">Overview</h2><div class="docString"><p>Parameterized implementation of the cyclic redundancy check (CRC) algorithm.</p><h3>INTRODUCTION</h3><p>This implementation is based on the (awesome) paper &quot;A Painless Guide to <a class="stClassLiteral" href="class/CRC.html/class/CRC.html">CRC</a> <a class="stClassLiteral" href="class/CRC.html/class/Error.html">Error</a> Detection Algorithms&quot; by Ross Williams. You should find a copy of the paper here: <a href="http://www.ross.net/crc/.">http://www.ross.net/crc/.</a> In this paper Ross describes a parameterized implementation that enables the different variations of the <a class="stClassLiteral" href="class/CRC.html/class/CRC.html">CRC</a> algorithm to be used in a consistent way, simply by adjusting the parameters. If you don't have a clue about <a class="stClassLiteral" href="class/CRC.html/class/CRC.html">CRC</a> (like me) then I strongly suggest reading the paper. It will also help you to understand how to make the best use of this implementation.</p><p>The &quot;CRC RevEng&quot; project on sourceforge implements Williams's &quot;RockSoft&quot; parameterized <a class="stClassLiteral" href="class/CRC.html/class/CRC.html">CRC</a> program (as does this class) and comes with a handy list of parameters for various <a class="stClassLiteral" href="class/CRC.html/class/CRC.html">CRC</a> algorithm: <a href="http://reveng.sourceforge.net/crc-catalogue/.">http://reveng.sourceforge.net/crc-catalogue/.</a></p><p>For ease of use and better performance, the two defacto standard variations &quot;CRC16&quot; and &quot;CRC32&quot; have been predefined. The lookup tables for these implementations are included on the class side. For all other variations the lookup table will be generated at runtime before the first run.</p><p>If you want to define your own algorithm you can do so by using the methods in the &quot;accessing-parameters&quot; protocol. Note that there are no default values. Here's a short overview: #width: defines the width of the register (usually 16 or 32) #polynome: defines the polynome to use for polynome division / lookup table creation #registerFill: defines the start content of the working register (usually all ones or all zeros) #reflectInput: if true every byte will be reflected before processing (e.g. 100101 -&gt; 101001) #reflectOutpu: if true the entire register will be reflected before the final XOR stage #finallyXorWith: defines the final XOR for the entire register #lookupTable: the only OPTIONAL parameter. The lookup table will be generated at runtime if none has been supplied #message: the message to calculate the <a class="stClassLiteral" href="class/CRC.html/class/CRC.html">CRC</a> on </p><h3>EXAMPLES</h3><p>The simplest possible snippet uses the class side methods for &quot;CRC16&quot; and &quot;CRC32&quot;: <a class="stClassLiteral" href="class/CRC.html/class/CRC.html">CRC</a> crc16FromCollection: 'some message'. --&gt; 55709 <a class="stClassLiteral" href="class/CRC.html/class/CRC.html">CRC</a> crc32FromCollection: 'some message'. --&gt; 191312361</p><p>Let's assume, you wanted to use &quot;CRC16 reversed&quot; (neither input nor output reflected). Then you would have to change the parameters like so (the reversed form uses a different polynome and a different start register content): crc := <a class="stClassLiteral" href="class/CRC.html/class/CRC.html">CRC</a> new beCrc16; polynome: 16r1021; registerFill: 16rFFFF; reflectInput: false; reflectOutput: false; message: 'some message'; yourself. crc run. --&gt; 46785</p><p>Using a single instance as in the code above will of course be faster than using the class side methods when performing multiple runs. But if you are really concerned about performance (see PERFORMANCE) you should use the &quot;raw&quot; methods (no checks! If you forget to set parameters there will be errors....): crc := <a class="stClassLiteral" href="class/CRC.html/class/CRC.html">CRC</a> new beCrc16; message: 'some message'; yourself. crc runRefInRefOut. --&gt; 55709</p><div class="code">&quot;String&gt;&gt;crc16&quot;	times := OrderedCollection new.10 timesRepeat: [ times add: [ 1000000 timesRepeat: [ 'this is a test message' crc16 ] ] timeToRun ].times average floor. --&gt; 530&quot;raw&quot;times := OrderedCollection new.10 timesRepeat: [ times add: [ 1000000 timesRepeat: [ crc runRefInRefOut ] ] timeToRun ].times average floor. --&gt; 535&quot;user friendly, one instance&quot;	times := OrderedCollection new.10 timesRepeat: [ times add: [ 1000000 timesRepeat: [ crc run ] ] timeToRun ].times average floor. --&gt; 616&quot;user friendly, one instance per run&quot;times := OrderedCollection new.10 timesRepeat: [ times add: [ 1000000 timesRepeat: [ CRC crc16FromCollection: 'this is a test message' ] ] timeToRun ].</div>&nbsp;<h3>PERFORMANCE</h3><p>The performance of this implementation (tested for crc16) is equal to the performance of String&gt;&gt;crc16 if executed &quot;raw&quot; (see EXAMPLES). For the users sake however, the implementation does a few extra checks to improve ease of use. The cost is a loss of performance of about factor 1.15 (single instance) and 1.42 (one instance per run) (note that although I took an average of 10, the results will vary quite a bit each time you run the code): crc := <a class="stClassLiteral" href="class/CRC.html/class/CRC.html">CRC</a> new beCrc16; message: 'this is a test message'; yourself.</p><div class="code">&quot;String&gt;&gt;crc16&quot;	times := OrderedCollection new.10 timesRepeat: [ times add: [ 1000000 timesRepeat: [ 'this is a test message' crc16 ] ] timeToRun ].times average floor. --&gt; 530&quot;raw&quot;times := OrderedCollection new.10 timesRepeat: [ times add: [ 1000000 timesRepeat: [ crc runRefInRefOut ] ] timeToRun ].times average floor. --&gt; 535&quot;user friendly, one instance&quot;	times := OrderedCollection new.10 timesRepeat: [ times add: [ 1000000 timesRepeat: [ crc run ] ] timeToRun ].times average floor. --&gt; 616&quot;user friendly, one instance per run&quot;times := OrderedCollection new.10 timesRepeat: [ times add: [ 1000000 timesRepeat: [ CRC crc16FromCollection: 'this is a test message' ] ] timeToRun ].</div>&nbsp;<p>times average floor. --&gt; 759</p></div></div><div class="classMethodDetail methodDetail"><h2 class="title">Class Method Details</h2></div><div class="instanceMethodDetail methodDetail"><h2 class="title">Instance Method Details</h2></div></div><script type="text/javascript">/*<![CDATA[*/function onLoad(){};/*]]>*/</script></body></html>