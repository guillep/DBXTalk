<html><head><title>ClassChangeRecord</title><link rel="stylesheet" type="text/css" href="../files/common.css"/><link rel="stylesheet" type="text/css" href="../files/stcode.css"/><link rel="stylesheet" type="text/css" href="../files/style.css"/><link rel="stylesheet" type="text/css" href="../files/vtip.css"/><script>/*<![CDATA[*/
document.WEBDOC_RELATIVE_DOCUMENT_ROOT ="../..";
document.WEBDOC_PHARO_VERSION ="'4.0'";
/*]]>*/</script><script src="../files/jQuery.js"></script><script src="../files/jQueryUi.js"></script><script src="../files/app.js"></script></head><body onload="onLoad()"><div id="header"><form accept-charset="utf-8" method="get" action="/" class="hidden" id="search"><div class="searchInput">Search: <input accesskey="s" placeholder="search" name="4" id="search_box" size="30" value="" onkeyup="$.ajax({&quot;url&quot;:&quot;/&quot;,&quot;data&quot;:[&quot;1&quot;,&quot;2=&quot;+encodeURIComponent($(&quot;#search_box&quot;).val())].join(&quot;&amp;&quot;)});$(&quot;#searchResults&quot;).load(&quot;/&quot;,&quot;3&quot;)" type="search" class="search"/></div><div id="searchResults"></div><div></div></form></div><div id="content"><h1 class="className">ClassChangeRecord</h1><dl class="box"><dt>Subclass of: </dt><dd><span class="inheritName"><a class="object_link class_link" target="classView" title="Object (class)" href="../class/Object.html">Object</a></span><ul class="fullTree"><li><a class="object_link class_link" target="classView" title="ClassChangeRecord (class)" href="../class/ClassChangeRecord.html">ClassChangeRecord</a></li><li class="next"><a class="object_link class_link" target="classView" title="ProtoObject (class)" href="../class/ProtoObject.html">ProtoObject</a></li><li class="next"><a class="object_link class_link" target="classView" title="Object (class)" href="../class/Object.html">Object</a></li></ul><a class="inheritanceTree">&oplus;</a></dd></dl><br/><div class="classComment"><h2 class="title">Overview</h2><div class="docString"><p>A ClassChangeRecorder keeps track of most substantive changes premissible in a project, isolated or not.</p><p>Structure: inForcea boolean Tells whether these changes are in effect. true for all changeSets in and above the current project. It should be sufficient only to record this for the changeSet as a whole, but this redundancy could help in error recovery. classIsLocala boolean <a class="stClassLiteral" href="class/ClassChangeRecord.html/class/True.html">True</a> if and only if this class is defined in this layer of the project structure. changeTypes an identitySet Summarizes which changes have been made in this class. Values include #comment, #reorganize, #rename, and the four more summarized below. thisNamea string Retains the class name for this layer. priorNamea string Preserves the prior name. thisCommenta text Retains the class comment for this layer. priorCommenta text Preserves the prior comment. thisOrganizationa classOrganizer Retains the class organization for this layer. priorOrganizationa classOrganizer Preserves the prior organization. thisMDa methodDictionary Used to prepare changes for nearly atomic invocation of this layer (see below). priorMDa methodDictionary Preserves the state of an altered class as it exists in the next outer layer of the project structure. methodChangesa dictionary of classChangeRecords Retains all the method changes for this layer.</p><p>Four of the possible changeTypes are maintained in a mutually exclusive set, analogously to MethodChangeRecords.  Here is a simple summary of the relationship between these four changeType symbols and the recording of prior state |prior == nil|prior not nil ---------|----------------------------|-------------------- add|add|change ---------|----------------------------|-------------------- remove|addedThenRemoved|remove</p><p>A classChangeRecorder is notified of changes by the method noteMethodChange: <a href="ClassChangeRecord"></a>. ClassChangeRecorders are designed to invoke a set of changes relative to the definition of a class in an prior layer.  It is important that both invocation and revocation of these changes take place in a nearly atomic fashion so that interdependent changes will be adopted as a whole, and so that only one flush of the method cache should be necessary.  A further reason for revocation to be simple is that it may be requested as an attempt to recover from an error in a project that is failing.</p></div></div><div class="instanceMethodDetail methodDetail"><h2 class="title">Instance Method Details</h2></div></div><script type="text/javascript">/*<![CDATA[*/function onLoad(){};/*]]>*/</script></body></html>