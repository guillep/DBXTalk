<!DOCTYPE html>
<html lang="en">
  <head profile="http://www.w3.org/2005/10/profile">
	<link rel="icon" 
      type="image/png" 
      href="/DBXTalk/images/favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	
    <title>Garage</title>
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/DBXTalk/stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/DBXTalk/stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/DBXTalk/stylesheets/print.css" media="print">
	<script src="/DBXTalk/highlight/highlight.pack.js"></script>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	<style>
	/* Sticky footer styles
	-------------------------------------------------- */
	html {
	  position: relative;
	  min-height: 100%;
	}
	body {
	  /* Margin bottom by footer height */
	  margin-bottom: 60px;
	}
	.footer {
	  position: absolute;
	  bottom: 3px;
	  width: 100%;
	  /* Set the fixed height of the footer here */
	  height: 60px;
	  background-color: #f5f5f5;
	}


	/* Custom page CSS
	-------------------------------------------------- */
	/* Not required for template or sticky footer method. */

	body > .container {
	  padding: 60px 15px 0;
	}
	.container .text-muted {
	  margin: 20px 0;
	}

	.footer > .container {
	  padding-right: 15px;
	  padding-left: 15px;
	}

	code {
	  font-size: 80%;
	}
	
	</style>
	<style>
	/*** Custom Navigation Bar Style
	**** Autogenerated
	****
	***/
	/*Generated from: http://work.smarchal.com/twbscolor/css/9787ef715beaecf0f1ecdbff0*/
	.navbar-default {
	  background-color: #9787ef;
	  border-color: #715bea;
	}
	.navbar-default .navbar-brand {
	  color: #ecf0f1;
	}
	.navbar-default .navbar-brand:hover, .navbar-default .navbar-brand:focus {
	  color: #ecdbff;
	}
	.navbar-default .navbar-text {
	  color: #ecf0f1;
	}
	.navbar-default .navbar-nav > li > a {
	  color: #ecf0f1;
	}
	.navbar-default .navbar-nav > li > a:hover, .navbar-default .navbar-nav > li > a:focus {
	  color: #ecdbff;
	}
	.navbar-default .navbar-nav > .active > a, .navbar-default .navbar-nav > .active > a:hover, .navbar-default .navbar-nav > .active > a:focus {
	  color: #ecdbff;
	  background-color: #715bea;
	}
	.navbar-default .navbar-nav > .open > a, .navbar-default .navbar-nav > .open > a:hover, .navbar-default .navbar-nav > .open > a:focus {
	  color: #ecdbff;
	  background-color: #715bea;
	}
	.navbar-default .navbar-toggle {
	  border-color: #715bea;
	}
	.navbar-default .navbar-toggle:hover, .navbar-default .navbar-toggle:focus {
	  background-color: #715bea;
	}
	.navbar-default .navbar-toggle .icon-bar {
	  background-color: #ecf0f1;
	}
	.navbar-default .navbar-collapse,
	.navbar-default .navbar-form {
	  border-color: #ecf0f1;
	}
	.navbar-default .navbar-link {
	  color: #ecf0f1;
	}
	.navbar-default .navbar-link:hover {
	  color: #ecdbff;
	}

	@media (max-width: 767px) {
	  .navbar-default .navbar-nav .open .dropdown-menu > li > a {
	    color: #ecf0f1;
	  }
	  .navbar-default .navbar-nav .open .dropdown-menu > li > a:hover, .navbar-default .navbar-nav .open .dropdown-menu > li > a:focus {
	    color: #ecdbff;
	  }
	  .navbar-default .navbar-nav .open .dropdown-menu > .active > a, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:hover, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:focus {
	    color: #ecdbff;
	    background-color: #715bea;
	  }
	}
	</style>
  </head>
  
  <body style="padding-top:150px">
    <div class="container-fluid">
    	<div class="inner">
			<nav class="navbar navbar-default navbar-fixed-top">
			
	 		<header style="padding:10px;background-color:white;">
				<div style="width:700px;margin:0 auto;">
					<a href="/DBXTalk/" role="button">
			 			<img alt="dbxtalk" src="/DBXTalk/images/dbxtalk.png" style="height:100px;float:left;margin-right:10px">
					</a>
					<h1>dbxtalk</h1>
		 			<h2 style="margin:0px;">Pharo's relational database suite</h2>
				</div>
	 		</header>
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" style="width:700px;margin:0 auto;">
				  <ul class="nav navbar-nav">
					
					<li role="presentation" id="Home" >
						<a href="/DBXTalk/index.html" 
							>
							Home
							
						</a>
						
					</li>
					
					<li role="presentation" id="Garage" class="dropdown">
						<a href="" 
							class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
							Garage
							<span class="caret"></span>
						</a>
						
						<ul class="dropdown-menu" role="menu">
							
							<li role="presentation"><a href="/DBXTalk/garage/index.html">Overview</a></li>
							
							<li role="presentation"><a href="/DBXTalk/garage/installation.html">Installation</a></li>
							
							<li role="presentation"><a href="/DBXTalk/garage/getting_started.html">Getting Started</a></li>
							
							<li role="presentation"><a href="/DBXTalk/garage/drivers.html">Supported Drivers</a></li>
							
							<li role="presentation"><a href="/DBXTalk/garage/documentation.html">Documentation</a></li>
							
						</ul>
						
					</li>
					
					<li role="presentation" id="Glorp" >
						<a href="/DBXTalk/glorp.html" 
							>
							Glorp
							
						</a>
						
					</li>
					
					<li role="presentation" id="Contribute" >
						<a href="/DBXTalk/contribute.html" 
							>
							Contribute
							
						</a>
						
					</li>
					
					<li role="presentation" id="Contact" >
						<a href="/DBXTalk/contact.html" 
							>
							Contact
							
						</a>
						
					</li>
					
					</ul>
				</div>
			</nav>
        <hr>

        <section id="main_content">
      	
<h3>Installation</h3><a id="Installation"></a>
<p>This article describes how to install the Garage database driver. Garage is a database driver with a generic interface supporting operations on relational databases. Concrete drivers will implement this API to to provide a coherent way to use RDBMS.</p>
<h4>1. Getting the metacello configuration</h4><a id="Getting the metacello configuration"></a>
<p>Garage is easily installable using metacello. The home of garage is the <a href="http://www.smalltalkhub.com/#!/~DBXTalk/Garage">DBXTalk repository in Smalltalkhub</a>. You can download Garage's metacello configuration using a gofer script as follows</p>
<p><figure><pre><code class="Smalltalk">Gofer it
	smalltalkhubUser: 'DBXTalk' project: 'Garage';
	configurationOf: 'Garage';
	load.</code></pre><figcaption></figcaption></figure></p>

<h4>2. Installing a driver</h4><a id="Installing a driver"></a>
<p>Once you have the metacello configuration you can load one of the available drivers or all of them, by specifying a particular load group</p>
<p><figure><pre><code class="Smalltalk">(ConfigurationOfGarage project version: #development)
	load: loadGroup.

&quot;e.g., To download mysql&quot;
(ConfigurationOfGarage project version: #development)
	load: 'mysql'.
	
&quot;e.g., To download all drivers&quot;
(ConfigurationOfGarage project version: #development)
	load.</code></pre><figcaption></figcaption></figure></p>
<p>The following table specifies which are the supported drivers for download, which are their load groups and which are their external dependencies:</p>
<table style="border: solid thin"><tr><th>Driver		</th><th>Load group		</th><th>Driver id		</th><th>Supports Connection to	</th><th>External Dependency</th></tr><tr><td>Sqlite3		</td><td>sqlite3			</td><td>sqlite3		</td><td>Sqlite3					</td><td>sqlite library</td></tr><tr><td>PostgresV2		</td><td>psql or postgres	</td><td>postgresV2		</td><td>Postgres					</td><td>No</td></tr><tr><td>Mysql			</td><td>mysql				</td><td>mysql			</td><td>Mysql						</td><td>No</td></tr><tr><td>OpenDBX		</td><td>opendbx			</td><td>opendbx		</td><td>Mysql,Sqlite3,Postgres, Oracle, SQLServer,	ODBC, others		</td><td>opendbx library + client library</td></tr></table>
<h4>3. External dependencies</h4><a id="External dependencies"></a>
<p>Some drivers require the extra installation of external dependencies such as libraries. This is the case of e.g., the sqlite and the opendbx drivers. These libraries should be installed in your system and be reachable by the virtual machine executable by doing one of the following:</p>
<ul><li> Installing the libraries in the same directory than the virtual machine</li><li> In Unix like systems, specifying the LD_LIBRARY_PATH environment for the virtual machine</li><li> In Unix like systems, creating symlinks in a directory visible to the virtual machine pointing to the installed libraries</li><li> Installing the libraries in a globally visible directory (/usr/lib for Unix like systems or System32 in Windowz)</li></ul>
<p class="todo"><strong>TODO:</strong> point to the download links of each particular library</p>
<h3>Checking my installation</h3><a id="Checking my installation"></a>
<p>Once we installed our driver, we can check our installation by running the tests. However, we should understand which are the drivers we installed and how to configure the tests in our machine setup.</p>
<h4>4. Which are the drivers I have</h4><a id="Which are the drivers I have"></a>
<p>To know which are the available drivers you have, you can ask it to the driver class. The driver class will answer with the ids of the available drivers. Drivers are automatically subscribed to a driver manager when they are loaded.</p>
<p><figure><pre><code class="Smalltalk">GADriver availableDrivers.
	&quot; =&gt; #(#mysql #opendbx #sqlite3 #postgresv2)&quot;</code></pre><figcaption></figcaption></figure></p>
<p>You can also ask it if a particular driver is available by providing it a database driver id. Database driver ids are case insensitive for the driver. Internally, they are all described by lowercase symbols, and will be transformed by the driver accordingly to that format when you query it with ids.</p>
<p><figure><pre><code class="Smalltalk">GADriver isAvailable: #mysql.
	&quot; =&gt; true&quot;
GADriver isAvailable: #MySQl.
	&quot; =&gt; true&quot;</code></pre><figcaption></figcaption></figure></p>
<h4>5.  Running the tests</h4><a id=" Running the tests"></a>
<p>Garage already provides a set of tests that check the correctness of the driver and thus, your particular installation. To test your installation you should tell the driver where to find your database server and how to connect to it.</p>
<p class="warning"><strong>Warning:</strong> Garage tests will try to create a database named <em>sodbxtest</em> and many tables inside it to test. This should not be a problem but be careful if you intend to test your installation in a productive environment.</p>
<p>Garage provides two ways to configure the tests to run. The first and simpler one is to override the method <strong>GADriverTest&gt;&gt;createFixture</strong>. This method should return a fixture that the tests are going to use to run. The method as you download it is as follows:</p>
<p><figure><pre><code class="Smalltalk">GADriverTest&gt;&gt;createFixture

	&quot;You should implement this method as a user of garage to make the tests run on your database.
	This method should return an instance of GADriverTestFixture with two connection strings:
	 - setupConnectionString is the connection string used to create the initial database (if needed)
	 - connection string is the connection string used to manipulate the created database.
	
	Examples can be found in class GAContinuousIntegrationConfiguration&quot;
	
	self shouldBeImplemented
	
	&quot;^ GADriverTestFixture 
		setupConnectionString: SetupConnectionString
		connectionString: ConnectionString&quot;</code></pre><figcaption></figcaption></figure></p>
<p>To provide a test fixture you should uncomment the last three lines and set two connection strings: the setup connection string and the test connection string. The setup connection string will be used by the fixture to create and drop the <em>sodbxtest</em> database. The test connection string will connect to this database to perform the tests. A typical setup is as follows:</p>
<p><figure><pre><code class="Smalltalk">GADriverTestFixture 
	setupConnectionString: 'mysql://localhost:3306?user=sodbxtest&amp;password=sodbxtest'
	connectionString: 'mysql://localhost:3306/sodbxtest?user=sodbxtest&amp;password=sodbxtest'</code></pre><figcaption></figcaption></figure></p>
<p>Alternatively, you can also configure a test fixture without altering any methods, executing the following expression. If you use this option, make sure you version your scripts as they are not logged by default in version control systems and you make loose such information.</p>
<p><figure><pre><code class="Smalltalk">GADriverTest fixture: (GADriverTestFixture 
	setupConnectionString: 'mysql://localhost:3306?user=sodbxtest&amp;password=sodbxtest'
	connectionString: 'mysql://localhost:3306/sodbxtest?user=sodbxtest&amp;password=sodbxtest').</code></pre><figcaption></figcaption></figure></p>
<p>Then, running the tests should produce a set of all-green tests. If you want to compare with the latest version of Garage, you can check its status in its <a href="https://ci.inria.fr/dbxtalk/view/Garage/">CI job</a></p>
      	</section>
		<footer class="footer">
          Dbxtalk is maintained by <a href="https://github.com/guillep">guillep</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>
      </div>
    </div>

	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script>
	hljs.initHighlightingOnLoad();
	$("#Garage").addClass('active');
	function transformAnnotatedParagraphs(pClass) {
	    $("p." + pClass).wrap("<div class='alert alert-" + pClass + "' role='alert'/>" );
	};
	transformAnnotatedParagraphs('success');
	transformAnnotatedParagraphs('info');
	transformAnnotatedParagraphs('warning');
	transformAnnotatedParagraphs('danger');
	</script>
    
  </body>
</html>
