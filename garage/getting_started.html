<!DOCTYPE html>
<html lang="en">
  <head profile="http://www.w3.org/2005/10/profile">
	<link rel="icon" 
      type="image/png" 
      href="/DBXTalk/images/favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	
    <title>Garage</title>
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/DBXTalk/stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/DBXTalk/stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/DBXTalk/stylesheets/print.css" media="print">
	<script src="/DBXTalk/highlight/highlight.pack.js"></script>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	<style>
	/* Sticky footer styles
	-------------------------------------------------- */
	html {
	  position: relative;
	  min-height: 100%;
	}
	body {
	  /* Margin bottom by footer height */
	  margin-bottom: 60px;
	}
	.footer {
	  position: absolute;
	  bottom: 3px;
	  width: 100%;
	  /* Set the fixed height of the footer here */
	  height: 60px;
	}


	/* Custom page CSS
	-------------------------------------------------- */
	/* Not required for template or sticky footer method. */

	body > .container {
	  padding: 60px 15px 0;
	}
	.container .text-muted {
	  margin: 20px 0;
	}

	.footer > .container {
	  padding-right: 15px;
	  padding-left: 15px;
	}

	code {
	  font-size: 80%;
	}
	
	</style>
	<style>
	/*** Custom Navigation Bar Style
	**** Autogenerated
	****
	***/
	/*Generated from: http://work.smarchal.com/twbscolor/css/9787ef715beaecf0f1ecdbff0*/
	.navbar-default {
	  background-color: #9787ef;
	  border-color: #715bea;
	}
	.navbar-default .navbar-brand {
	  color: #ecf0f1;
	}
	.navbar-default .navbar-brand:hover, .navbar-default .navbar-brand:focus {
	  color: #ecdbff;
	}
	.navbar-default .navbar-text {
	  color: #ecf0f1;
	}
	.navbar-default .navbar-nav > li > a {
	  color: #ecf0f1;
	}
	.navbar-default .navbar-nav > li > a:hover, .navbar-default .navbar-nav > li > a:focus {
	  color: #ecdbff;
	}
	.navbar-default .navbar-nav > .active > a, .navbar-default .navbar-nav > .active > a:hover, .navbar-default .navbar-nav > .active > a:focus {
	  color: #ecdbff;
	  background-color: #715bea;
	}
	.navbar-default .navbar-nav > .open > a, .navbar-default .navbar-nav > .open > a:hover, .navbar-default .navbar-nav > .open > a:focus {
	  color: #ecdbff;
	  background-color: #715bea;
	}
	.navbar-default .navbar-toggle {
	  border-color: #715bea;
	}
	.navbar-default .navbar-toggle:hover, .navbar-default .navbar-toggle:focus {
	  background-color: #715bea;
	}
	.navbar-default .navbar-toggle .icon-bar {
	  background-color: #ecf0f1;
	}
	.navbar-default .navbar-collapse,
	.navbar-default .navbar-form {
	  border-color: #ecf0f1;
	}
	.navbar-default .navbar-link {
	  color: #ecf0f1;
	}
	.navbar-default .navbar-link:hover {
	  color: #ecdbff;
	}

	@media (max-width: 767px) {
	  .navbar-default .navbar-nav .open .dropdown-menu > li > a {
	    color: #ecf0f1;
	  }
	  .navbar-default .navbar-nav .open .dropdown-menu > li > a:hover, .navbar-default .navbar-nav .open .dropdown-menu > li > a:focus {
	    color: #ecdbff;
	  }
	  .navbar-default .navbar-nav .open .dropdown-menu > .active > a, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:hover, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:focus {
	    color: #ecdbff;
	    background-color: #715bea;
	  }
	}
	</style>
  </head>
  
  <body style="padding-top:150px">
    <div class="container-fluid">
    	<div class="inner">
			<nav class="navbar navbar-default navbar-fixed-top">
			
	 		<header style="padding:10px;background-color:white;">
				<div style="width:700px;margin:0 auto;">
					<a href="/DBXTalk/" role="button">
			 			<img alt="dbxtalk" src="/DBXTalk/images/dbxtalk.png" style="height:100px;float:left;margin-right:10px">
					</a>
					<h1>dbxtalk</h1>
		 			<h2 style="margin:0px;">Pharo's relational database suite</h2>
				</div>
	 		</header>
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" style="width:700px;margin:0 auto;">
				  <ul class="nav navbar-nav">
					
					<li role="presentation" id="Home" >
						<a href="/DBXTalk/index.html" 
							>
							Home
							
						</a>
						
					</li>
					
					<li role="presentation" id="Garage" class="dropdown">
						<a href="" 
							class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
							Garage
							<span class="caret"></span>
						</a>
						
						<ul class="dropdown-menu" role="menu">
							
							<li role="presentation"><a href="/DBXTalk/garage/index.html">Overview</a></li>
							
							<li role="presentation"><a href="/DBXTalk/garage/installation.html">Installation</a></li>
							
							<li role="presentation"><a href="/DBXTalk/garage/getting_started.html">Getting Started</a></li>
							
							<li role="presentation"><a href="/DBXTalk/garage/drivers.html">Supported Drivers</a></li>
							
							<li role="presentation"><a href="/DBXTalk/garage/documentation.html">Documentation</a></li>
							
						</ul>
						
					</li>
					
					<li role="presentation" id="Glorp" >
						<a href="/DBXTalk/glorp.html" 
							>
							Glorp
							
						</a>
						
					</li>
					
					<li role="presentation" id="Contribute" >
						<a href="/DBXTalk/contribute.html" 
							>
							Contribute
							
						</a>
						
					</li>
					
					<li role="presentation" id="Contact" >
						<a href="/DBXTalk/contact.html" 
							>
							Contact
							
						</a>
						
					</li>
					
					</ul>
				</div>
			</nav>
        <hr>

        <section id="main_content">
      	
<h3>Entering the Garage</h3>
<p>This article describes the basics of the garage database driver. It covers its basic usage: creating connections, connecting and closing them, and executing SQL queries. Details and particular features are discussed in other related articles.</p>
<h4>1. Getting a Connection</h4>
<p>The Garage database driver supports the creation of a connection through connection strings.</p>
<p><figure><pre><code class="Smalltalk">connection := GADriver fromConnectionString:
	'mysql://localhost:5432/sodbxtest?&amp;user=sodbxtest&amp;password=sodbxtest'.</code></pre><figcaption></figcaption></figure></p>
<p>Connection strings are URL styled:</p>
<ul><li> the schema (http, ftp, etc.) is the database driver id (we will talk about it later). In this example our schema is mysql.</li><li> host, port and database are the address of your database server</li><li> the query-string allows us to put additional information such as connection credentials. the key <strong>user</strong> is followed by the database user to login and the key <strong>password</strong> by its password.</li></ul>
<pre>driver://host:port/database?key=value&amp;key2=value2</pre>

<p class="info"><strong>Which are the drivers I have?</strong> To know which are the available drivers you have, you can ask it to the driver class using the #availableDrivers message. For further information, check the <a href='installation.html'>installation page</a>.</p>
<h4>2. Stablishing connection</h4>
<p>Initially and to avoid surprises, a database connection is not connected to the database. You can check if a connection is connected at any time during the life of the connection using the isConnected message.</p>
<p><figure><pre><code class="Smalltalk">connection isConnected.
	&quot; =&gt; true/false&quot;</code></pre><figcaption></figcaption></figure></p>
<p>To activate the connection, we can send the <strong>connect</strong> message to it. If everything is allright (the database is available, username and passwords are correct) and the connection succedded we will receive no error. Instead, if a failure happened while trying to stablish the connection, it will raise an exception. Stablising manually the connection is useful to those users that want to parametrize the connection between its creation and its connection to the database. We will talk in more detail about connection settings later.</p>
<p><figure><pre><code class="Smalltalk">connection connect.</code></pre><figcaption></figcaption></figure></p>
<p>However, for those users that do not need to set manually parameters, he can use a shortcut that creates the connection and connects it in only one step.</p>
<p><figure><pre><code class="Smalltalk">connection := GADriver connectToConnectionString: 
	'mysql://localhost:3306/sodbxtest?user=sodbxtest&amp;password=sodbxtest'.</code></pre><figcaption></figcaption></figure></p>
<h4>3. Sending a Query</h4>
<p>Once a connection is available, we can send queries and statements to it for their execution. Here we will only see a simple query, using the execute message. We will describe in details how queries and their results are managed later.</p>
<p><figure><pre><code class="Smalltalk">connection execute: 'CREATE TABLE CATS (
	name varchar(50),
	owner varchar(50))'.

connection execute: 'SELECT * FROM CATS'.</code></pre><figcaption></figcaption></figure></p>
<p>Executing a correct query will return an according result: a select query will answer a result with rows, other statements will return a result with a summary of the action they did (e.g., an insert or update will return the amount of modified rows). Executing a wrong query will throw an exception explaining the problem. For example, a query with incorrect syntax will fail and tell us where is the syntax problem; querying an unexistent table will throw an error saying so. We will dive later into the expected kind of results.</p>

<h4>4. Closing the connection</h4>
<p>Database servers allow a limited number of simultaneous connections. If too many connections are open the server will start refusing new connections. To avoid these problems we have to close unused connections. Closing an unused connection will free used resources both in our Pharo image and in the database server. We can close manually a database connection by sending it the close message.</p>
<p><figure><pre><code class="Smalltalk">connection close.</code></pre><figcaption></figcaption></figure></p>
<p>Garage provides also the automatic closure of connections on garbage collection. That is, when a database connection object is being garbage collected, the connection will be automatically closed. To allow a database connection to be automatically collected, we must release all references to it. We must not keep references to a connection from any of our objects.</p>
      	</section>
		<footer class="footer">
          This website is developed using <a href="https://github.com/pillar-markup/pillar-documentation">Pillar</a><br>
          Theme based on tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>
      </div>
    </div>

	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script>
	hljs.initHighlightingOnLoad();
	$("#Garage").addClass('active');
	function transformAnnotatedParagraphs(pClass) {
	    $("p." + pClass).wrap("<div class='alert alert-" + pClass + "' role='alert'/>" );
	};
	transformAnnotatedParagraphs('success');
	transformAnnotatedParagraphs('info');
	transformAnnotatedParagraphs('warning');
	transformAnnotatedParagraphs('danger');
	</script>
    
  </body>
</html>
